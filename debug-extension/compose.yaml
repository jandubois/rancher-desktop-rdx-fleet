# Rancher Desktop Extension Backend Service
#
# WORKAROUNDS REQUIRED:
# 1. Image name must be hardcoded - ${DESKTOP_PLUGIN_IMAGE} is not expanded
# 2. pull_policy: never - required for locally-built images
# 3. ports: 8081 exposed - ddClient.extension.vm.service is not implemented
#    NOTE: Using 8081 to avoid conflict with fleet extension which uses 8080
#
# See docs/reference/rancher-desktop-extension-bugs.md for details

services:
  backend:
    image: rd-extension-debugger:dev
    pull_policy: never
    command: ["/service", "-socket", "/run/guest-services/rd-extension-debugger.sock", "-port", "8081"]
    ports:
      - "8081:8081"
